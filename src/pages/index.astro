---
import Navbar from "../components/Navbar.astro";
import Resources from "../components/Resources.astro";
import "../styles/global.css";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Seek Legal | Access to Justice</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <Navbar />

    <div class="stage" id="stage">
      <div class="hero">
        <div class="pill-badge">
          <span class="font-semibold text-gray-500">Coming </span>
          <span class="font-bold" style="color: #741b25;">2026</span>
        </div>

        <h1>The new hub for accessible Australian justice.</h1>

        <a href="#resources" class="cta-button"> Get Started </a>
      </div>
    </div>

    <Resources />

    <footer class="bg-gray-50 border-t border-gray-200 py-12">
      <div
        class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center text-sm text-gray-400 font-medium"
      >
        <p>&copy; 2026 Seek Legal.</p>
        <div class="flex gap-6 mt-4 md:mt-0">
          <a href="#" class="hover:text-[#741b25] transition">Privacy</a>
          <a href="#" class="hover:text-[#741b25] transition">Terms</a>
        </div>
      </div>
    </footer>

    <style is:global>
      :root {
        --bg: #ffffff;
        --fg: #000000;
        --muted: rgba(0, 0, 0, 0.6);
      }

      body {
        margin: 0;
        min-height: 100vh;
        background: var(--bg);
        font-family: "Inter", sans-serif;
      }

      .stage {
        position: relative;
        width: 100%;
        height: 100vh;
        overflow: hidden;
      }

      .hero {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        z-index: 10;
        pointer-events: none;
        padding: 20px;
        max-width: 1000px;
        margin: 0 auto;
      }

      .pill-badge {
        background-color: #f3f4f6;
        padding: 8px 24px;
        border-radius: 9999px;
        margin-bottom: 2rem;
        font-size: 0.9rem;
        pointer-events: auto;
        transition: transform 0.2s ease;
      }
      .pill-badge:hover {
        transform: scale(1.05);
      }

      .hero h1 {
        margin: 0 0 32px;
        font-weight: 800;
        color: #000000;
        font-size: clamp(2.5rem, 5vw, 4.5rem);
        line-height: 1.2;
        letter-spacing: -0.03em;
      }

      .cta-button {
        pointer-events: auto;
        background-color: #eaddf7;
        color: #000000;
        padding: 14px 40px;
        border-radius: 50px;
        font-size: 1rem;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.2s ease;
        box-shadow: 0 4px 15px rgba(234, 221, 247, 0.6);
      }
      .cta-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(234, 221, 247, 0.8);
      }

      .icon-wrap {
        position: absolute;
        width: 80px;
        height: 80px;
        display: flex;
        justify-content: center;
        align-items: center;
        will-change: transform;
        z-index: 1;
        animation: floaty 6s ease-in-out infinite alternate;
        font-size: 3rem;
        user-select: none;
        cursor: default;
      }

      .icon-wrap:nth-child(odd) {
        animation-duration: 7s;
      }
      .icon-wrap:nth-child(even) {
        animation-duration: 8s;
      }

      @keyframes floaty {
        0% {
          transform: translateY(0px) rotate(0deg);
        }
        100% {
          transform: translateY(-15px) rotate(5deg);
        }
      }
    </style>

    <script>
      interface Particle {
        el: HTMLElement;
        homeX: number;
        homeY: number;
        x: number;
        y: number;
        vx: number;
        vy: number;
      }

      const COUNT = 16;
      const ICON_SPACING = 110;
      const MASS = 4.5;
      const SPRING_K = 0.008;
      const DAMPING = 0.96;
      const MOUSE_RADIUS = 200;
      const MOUSE_STRENGTH = 0.3;
      const ZONE_RX = 380;
      const ZONE_RY = 180;

      const stage = document.getElementById("stage");
      const items: Particle[] = [];
      const mouse = { x: -9999, y: -9999 };

      const emojis: string[] = ["âš–ï¸", "Â§", "ðŸ“œ", "ðŸ›ï¸", "ðŸ–Šï¸", "ðŸ’¡", "ðŸ’¼"];

      const rand = (a: number, b: number) => a + Math.random() * (b - a);
      const pick = (arr: string[]) =>
        arr[Math.floor(Math.random() * arr.length)];

      function isInsideOval(
        x: number,
        y: number,
        cx: number,
        cy: number,
        rx: number,
        ry: number
      ) {
        const dx = x - cx;
        const dy = y - cy;
        return (dx * dx) / (rx * rx) + (dy * dy) / (ry * ry) <= 1;
      }

      function createIcons() {
        if (!stage) return;

        let w = stage.getBoundingClientRect().width;
        let h = stage.getBoundingClientRect().height;
        if (h < 100) h = window.innerHeight;
        if (w < 100) w = window.innerWidth;

        const rect = { width: w, height: h };
        const cx = rect.width / 2;
        const cy = rect.height / 2;

        stage.querySelectorAll(".icon-wrap").forEach((el) => el.remove());
        items.length = 0;

        for (let i = 0; i < COUNT; i++) {
          const wrap = document.createElement("div");
          wrap.className = "icon-wrap";
          wrap.innerText = pick(emojis);
          wrap.style.opacity = rand(0.4, 0.8).toString();
          wrap.style.transform = `rotate(${rand(-20, 20)}deg)`;
          stage.appendChild(wrap);

          let homeX = 0,
            homeY = 0,
            valid = false;
          let attempts = 0;
          while (!valid && attempts < 500) {
            const padding = 60;
            homeX = rand(padding, rect.width - padding);
            homeY = rand(padding, rect.height - padding);
            const inZone = isInsideOval(
              homeX,
              homeY,
              cx,
              cy,
              ZONE_RX + 50,
              ZONE_RY + 50
            );
            if (!inZone) {
              let tooClose = false;
              for (const other of items) {
                const dist = Math.hypot(
                  homeX - other.homeX,
                  homeY - other.homeY
                );
                if (dist < ICON_SPACING) {
                  tooClose = true;
                  break;
                }
              }
              if (!tooClose) valid = true;
            }
            attempts++;
          }
          items.push({
            el: wrap as HTMLElement,
            homeX: valid ? homeX : cx,
            homeY: valid ? homeY : cy,
            x: valid ? homeX : cx,
            y: valid ? homeY : cy,
            vx: 0,
            vy: 0,
          });
        }
      }

      window.addEventListener("mousemove", (e) => {
        mouse.x = e.clientX;
        mouse.y = e.clientY;
      });

      let resizeTimer: number | undefined;
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimer);
        // @ts-ignore
        resizeTimer = setTimeout(createIcons, 200);
      });

      function tick() {
        if (!stage) return;
        let w = stage.getBoundingClientRect().width;
        let h = stage.getBoundingClientRect().height;
        if (h < 100) h = window.innerHeight;
        if (w < 100) w = window.innerWidth;

        const cx = w / 2;
        const cy = h / 2;

        for (const p of items) {
          let targetX = p.homeX;
          let targetY = p.homeY;

          const dx = p.x - mouse.x;
          const dy = p.y - mouse.y;
          const dist = Math.hypot(dx, dy);

          if (dist < MOUSE_RADIUS) {
            const power =
              (1 - dist / MOUSE_RADIUS) * MOUSE_RADIUS * MOUSE_STRENGTH;
            const angle = Math.atan2(dy, dx);
            targetX += Math.cos(angle) * power;
            targetY += Math.sin(angle) * power;
          }

          const dxo = p.x - cx;
          const dyo = p.y - cy;
          const scaleY = ZONE_RX / ZONE_RY;
          const scaledDy = dyo * scaleY;
          const distOval = Math.hypot(dxo, scaledDy);

          if (distOval < ZONE_RX) {
            const overlap = ZONE_RX - distOval;
            let nx = dxo / distOval;
            let ny = scaledDy / distOval;
            ny /= scaleY;
            const pushFactor = overlap * 1.5;
            targetX += nx * pushFactor;
            targetY += ny * pushFactor;
          }

          const ax = (targetX - p.x) * SPRING_K;
          const ay = (targetY - p.y) * SPRING_K;
          p.vx += ax / MASS;
          p.vy += ay / MASS;
          p.vx *= DAMPING;
          p.vy *= DAMPING;
          p.x += p.vx;
          p.y += p.vy;

          if (p.el) {
            p.el.style.left = p.x + "px";
            p.el.style.top = p.y + "px";
            p.el.style.transform = `translate(-50%, -50%)`;
          }
        }
        requestAnimationFrame(tick);
      }

      if (document.readyState === "complete") {
        createIcons();
        requestAnimationFrame(tick);
      } else {
        window.addEventListener("load", () => {
          createIcons();
          requestAnimationFrame(tick);
        });
      }
    </script>
  </body>
</html>
